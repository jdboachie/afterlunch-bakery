<div class="w-full max-w-4xl mx-auto">
  <button type="button"
    class="mb-6 flex items-center gap-2 text-rose-500 hover:text-rose-900 transition-colors cursor-pointer text-preset-4"
    (click)="goBack()">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
      <path
        d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z">
      </path>
    </svg>
    Back to products
  </button>

  @if (product) {
  <div class="bg-white rounded-lg overflow-hidden shadow-sm">
    <div class="flex flex-col md:flex-row">
      <div class="md:w-1/2">
        <picture>
          <source media="(min-width: 1024px)" [srcset]="product.image.desktop" />
          <source media="(min-width: 768px)" [srcset]="product.image.tablet" />
          <img [src]="product.image.mobile" [alt]="product.name" class="w-full h-64 md:h-full object-cover" />
        </picture>
      </div>

      <div class="md:w-1/2 p-6 md:p-10 flex flex-col justify-center">
        <p class="text-rose-500 text-preset-4 mb-2">{{ product.category }}</p>
        <h1 class="text-rose-900 text-preset-1 mb-4">{{ product.name }}</h1>
        <p class="text-red text-preset-2 font-bold mb-8">${{ product.price | number:'1.2-2' }}</p>

        @if (isInCart()) {
        <div class="bg-red p-3 w-full md:w-48 h-14 flex items-center justify-between rounded-full">
          <button type="button"
            class="size-8 flex items-center justify-center rounded-full border border-white text-white cursor-pointer hover:bg-white hover:border-transparent hover:text-red transition-colors"
            (click)="handleDecrement()" aria-label="Decrease quantity">
            <ng-icon name="featherMinus" size="18" />
          </button>
          <span class="text-white text-preset-3 font-semibold">{{ getQuantity() }}</span>
          <button type="button"
            class="size-8 flex items-center justify-center rounded-full border border-white text-white cursor-pointer hover:bg-white hover:border-transparent hover:text-red transition-colors"
            (click)="handleIncrement()" aria-label="Increase quantity">
            <ng-icon name="featherPlus" size="18" />
          </button>
        </div>
        } @else {
        <button type="button"
          class="w-full md:w-auto bg-red text-white text-preset-3 font-semibold py-4 px-8 rounded-full cursor-pointer hover:bg-rose-900 transition-colors"
          (click)="handleAddToCart(product)">
          Add to Cart
        </button>
        }
      </div>
    </div>
  </div>
  } @else {
  <div class="bg-white rounded-lg overflow-hidden shadow-sm p-6">
    <p class="text-rose-500">Loading productâ€¦</p>
  </div>
  }
</div>